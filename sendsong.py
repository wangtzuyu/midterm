import numpy as np
import serial
import time

waitTime = 0.1
############################## SONG1 INFO ##############################
name1="London"

song1=[392, 440, 392, 349, 330, 349, 392,
       294, 330, 349,      330, 349, 392, 
       392, 392, 349, 349, 330, 330, 294,
       249,      392,      330, 294, 361,] 
                    

note1=[1, 1, 1, 1, 1, 1, 2,
       1, 1, 2,    1, 1, 2,
       1, 1, 1, 1, 1, 1, 2,
       2,    2,    1, 1, 2,]

songlength1=25
speeds1=1
########################################################################

############################## SONG2 INFO ##############################
name2="for alice"

song2=[659,622,659,622,659,494,587,523,440,0,
    261,330,440,494,  0,330,415,494,523,0,]

note2=[1,1,1,1,1,1,1,1,1,1,
       1,1,1,1,1,1,1,1,1,1,]

songlength2=20
speeds2=1
########################################################################

############################## SONG3 INFO ##############################
name3="fairy tale"

song3=[    
    196,392,349,330,330,349,330,
    330,349,330,349,330,294,261,
    261,330,392,440,
    440,440,392,294,294,349,330,
    0,261,330,392,440,
    440,440,392,
    294,294,349,330,440,330,293,261,
    294,330,220,
    220,261,261,247,261,]

note3=[    
    1,1,1,2,1,1,3,
    1,1,1,1,1,1,2,
    1,1,1,2,
    1,1,1,1,1,1,2,
    1,1,1,1,2,
    1,1,2,
    1,1,1,1,1,1,1,2,
    1,1,2,
    1,1,2,2,2,]
songlength3=49
speeds3=1
########################################################################

############################## SONG4 INFO ##############################
name4="sky castle"

song4=[    
    440,494,523,494,523,659,494,0,
    330,440,392,440,523,392,0,
    349,330,349,330,349,523,330,0,
    523,523,523,494,367,367,494,494,0,
    440,494,523,494,523,659,494,0,]

note4=[    
    1,1,2,1,1,1,2,1,
    1,2,1,1,1,2,1,
    1,1,2,1,1,1,2,1,
    1,1,1,2,1,1,1,2,1,
    1,1,2,1,1,1,2,1,]

songlength4=40
speeds4=2
########################################################################

############################## SONG5 INFO ##############################
name5="slient night"

song5=[
    349,392,349,292,
    349,392,349,292,
    523,523,440,
    494,494,349,0,
    392,392,466,
    440,392,349,
    392,349,294,]

note5=[    
    2,1,1,2,
    2,1,1,2,
    2,1,2,
    2,1,2,1,
    2,1,2,
    1,1,2,
    1,1,2,]

songlength5=24
speeds5=1


########################################################################
############################## SONG6 INFO ##############################
name5="Doraemon"

song5=[
      196,261,261,339,440,330,392,
      392,440,392,300,349,330,294,
      220,294,294,349,494,494,449,392,
      349,349,349,330,220,246,246,261,294,0,

      196,261,261,339,440,330,392,
      392,440,392,300,349,330,294,
      220,294,294,349,494,494,449,392,
      349,349,330,246,293,261,0,]

note5=[    
      1,1,1,1,1,1,2,
      1,1,1,1,1,1,2,
      1,1,1,1,1,1,1,1,
      1,1,1,1,1,1,1,1,2,2,
      1,1,1,1,1,1,2,
      1,1,1,1,1,1,2,
      1,1,1,1,1,1,1,1,
      2,1,1,1,1,2,2,]

songlength5=24
speeds5=1


########################################################################
########################################################################
formatter = lambda x: "%.3f" % x

serdev = '/dev/ttyACM0'
s = serial.Serial(serdev)

song = song1 + note1 #+ song2 + note2 + song3 + note3 + song4 + note4 + song5 + note5 +song6 + note6  
#songlength = 2 * (songlength1 + songlength2 + songlength3 + songlength4 + songlength5+ songlength6)

songs = []
for num in song:
       songs.append(float(num/1000))

songtable = np.array(songs)

print("Start sending songs ...")
print("It may take about %d seconds ..." % (int(len(songtable) * waitTime)))
for data in songtable:
  s.write(bytes(formatter(data), 'UTF-8'))
  time.sleep(waitTime)
s.close()
print("Songs are sended completely !!")
