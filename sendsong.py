import numpy as np
import serial
import time

waitTime = 0.1
############################## SONG1 INFO ##############################
name1="little star"

song1=[261, 261, 392, 392, 440, 440, 392,
      349, 349, 330, 330, 294, 294, 261,
      392, 392, 349, 349, 330, 330, 294,
      392, 392, 349, 349, 330, 330, 294,
      261, 261, 392, 392, 440, 440, 392,
      349, 349, 330, 330, 294, 294, 261]

note1=[1, 1, 1, 1, 1, 1, 2,
      1, 1, 1, 1, 1, 1, 2,
      1, 1, 1, 1, 1, 1, 2,
      1, 1, 1, 1, 1, 1, 2,
      1, 1, 1, 1, 1, 1, 2,
      1, 1, 1, 1, 1, 1, 2]

songlength1=42
speeds1=1
########################################################################

############################## SONG2 INFO ##############################
name2="little bee"

song2=[392,330,330,349
,294,294,261,294,330,349,392,392,392,392,330,330,349
,294,294,261,330,392,392,330,294,294,294,294,294,330,349,330,
330,330,330,330,349,392,392,330,330,349,294,294,261,330,392,392,261]

note2=[1,1,2,1,1,2,1,1,1,1,1,1,2,
       1,1,2,1,1,2,1,1,1,1,4,
       1,1,1,1,1,1,2,1,1,1,1,1,1,2,
       1,1,2,1,1,2,1,1,1,1,4]

songlength2=49
speeds2=1
########################################################################

############################## SONG3 INFO ##############################
name3="jingle bell"

song3=[330,330,330,330,330,330,330,392,261,294,330,
       349,349,349,349,349,330,330,330,294,294,330,294,392,
       330,330,330,330,330,330,330,392,261,294,330,
       349,349,349,349,349,330,330,392,392,349,294,261]

note3=[1,1,2,1,1,2,1,1,1,1,4,
        1,1,2,1,1,1,1 ,1,1,1,1,2,2,
       1,1,2,1,1,2,1,1,1,1,4,
        1,1,2,1,1,1,1 ,1,1,1,2,2]

songlength3=47
speeds3=1
########################################################################

############################## SONG4 INFO ##############################
name4="two tigers"

song4=[261,294,330,261,261,294,330,261,
       330,349,392,330,349,392,
       392,440,392,349,330,261,392,440,392,349,330,261,
       261,196,261,261,196,261]

note4=[2,2,2,2,2,2,2,2,
      2,2,4,2,2,4,
      1,1,1,1,2,2,1,1,1,1,2,2,
      2,2,4,2,2,4]

songlength4=32
speeds4=2
########################################################################

############################## SONG5 INFO ##############################
name5="train fly fast"

song5=[392,392,330,261,392,392,330,261,
       294,330,349,349,330,349,349,392,
       392,330,392,330,294,330,261,
       349,294,294,294,330,261,261,261,
       294,330,349,294,261,247,261]

note5=[1,1,1,1,1,1,1,1,
        1,1,1,1,1,1,1,1,
         1,1,1,1,1,1,2,
         1,1,1,1,1,1,1,1,
         1,1,1,1,1,1,2]

songlength5=38
speeds5=1
########################################################################

########################################################################
formatter = lambda x: "%.3f" % x

serdev = '/dev/ttyACM0'
s = serial.Serial(serdev)

song = song1 + note1 #+ song2 + note2 + song3 + note3 + song4 + note4 + song5 + note5 
#songlength = 2 * (songlength1 + songlength2 + songlength3 + songlength4 + songlength5)

songs = []
for num in song:
       songs.append(float(num/1000))

songtable = np.array(songs)

print("Start sending songs ...")
print("It may take about %d seconds ..." % (int(len(songtable) * waitTime)))
for data in songtable:
  s.write(bytes(formatter(data), 'UTF-8'))
  time.sleep(waitTime)
s.close()
print("Songs are sended completely !!")
